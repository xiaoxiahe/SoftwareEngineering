# ç”µåŠ¨æ±½è½¦å……ç”µæ¡©ç®¡ç†ç³»ç»Ÿ

ä¸€ä¸ªå®Œæ•´çš„ç”µåŠ¨æ±½è½¦å……ç”µæ¡©ç®¡ç†ç³»ç»Ÿï¼ŒåŒ…å«åç«¯æœåŠ¡ã€å‰ç«¯ç”¨æˆ·ç•Œé¢å’Œå……ç”µæ¡©æ¨¡æ‹Ÿå™¨ã€‚ç³»ç»Ÿæ”¯æŒå……ç”µæ¡©ç®¡ç†ã€ç”¨æˆ·å……ç”µæœåŠ¡ã€æ™ºèƒ½è°ƒåº¦ã€å®æ—¶ç›‘æ§å’Œè®¡è´¹ç®¡ç†ç­‰åŠŸèƒ½ã€‚

## ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å‰ç«¯åº”ç”¨       â”‚    â”‚    åç«¯æœåŠ¡      â”‚    â”‚   å……ç”µæ¡©æ¨¡æ‹Ÿå™¨   â”‚
â”‚   (SvelteKit)   â”‚â—„â”€â”€â–ºâ”‚   (Go + PG)     â”‚â—„â”€â”€â–ºâ”‚    (Go)        â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ â€¢ ç”¨æˆ·ç•Œé¢       â”‚    â”‚ â€¢ APIæœåŠ¡       â”‚    â”‚ â€¢ å……ç”µæ¡©æ¨¡æ‹Ÿ     â”‚
â”‚ â€¢ ç®¡ç†æ§åˆ¶å°     â”‚    â”‚ â€¢ ä¸šåŠ¡é€»è¾‘       â”‚    â”‚ â€¢ çŠ¶æ€ä¸ŠæŠ¥       â”‚
â”‚ â€¢ å®æ—¶ç›‘æ§       â”‚    â”‚ â€¢ æ•°æ®å­˜å‚¨       â”‚    â”‚ â€¢ æ•…éšœæ¨¡æ‹Ÿ       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æŠ€æœ¯æ ˆ

### åç«¯ (Backend)

- **è¯­è¨€**: Go 1.24.3
- **æ•°æ®åº“**: PostgreSQL
- **æ¶æ„**: Clean Architecture
- **è®¤è¯**: JWT
- **API**: RESTful

### å‰ç«¯ (Frontend)

- **æ¡†æ¶**: SvelteKit 2.21.1
- **è¯­è¨€**: TypeScript
- **æ ·å¼**: Tailwind CSS
- **æ„å»º**: Vite
- **åŒ…ç®¡ç†**: Bun

### æ¨¡æ‹Ÿå™¨ (Simulator)

- **è¯­è¨€**: Go 1.24.3
- **é€šä¿¡**: HTTP Client
- **é…ç½®**: JSON
- **æ—¥å¿—**: ç»“æ„åŒ–æ—¥å¿—

## æ ¸å¿ƒåŠŸèƒ½

### ğŸ”Œ å……ç”µæ¡©ç®¡ç†

- æ”¯æŒå¿«å……æ¡©å’Œæ…¢å……æ¡©
- å®æ—¶çŠ¶æ€ç›‘æ§ï¼ˆå¯ç”¨ã€å ç”¨ã€æ•…éšœã€ç»´æŠ¤ã€ç¦»çº¿ï¼‰
- æ•…éšœæŠ¥å‘Šå’Œç»´ä¿®ç®¡ç†
- ç»Ÿè®¡ä¿¡æ¯è·Ÿè¸ª

### ğŸ‘¥ ç”¨æˆ·ç®¡ç†

- ç”¨æˆ·æ³¨å†Œå’Œè®¤è¯
- ä¸ªäººä¿¡æ¯ç®¡ç†
- å……ç”µå†å²è®°å½•
- å¤šè§’è‰²æƒé™æ§åˆ¶

### âš¡ å……ç”µæœåŠ¡

- æ™ºèƒ½å……ç”µæ¡©åˆ†é…
- æ’é˜Ÿæœºåˆ¶å’Œç­‰å¾…æ—¶é—´é¢„ä¼°
- å®æ—¶å……ç”µç›‘æ§
- å……ç”µä¼šè¯ç®¡ç†

### ğŸ“Š æ•°æ®åˆ†æ

- ä½¿ç”¨ç»Ÿè®¡æŠ¥è¡¨
- æ”¶å…¥åˆ†æ
- è®¾å¤‡åˆ©ç”¨ç‡åˆ†æ
- ç”¨æˆ·è¡Œä¸ºåˆ†æ

### ğŸ’° è®¡è´¹ç³»ç»Ÿ

- çµæ´»çš„è®¡è´¹æ¨¡å¼
- å®æ—¶è´¹ç”¨è®¡ç®—
- è¯¦å•ç”Ÿæˆ
- æ”¯ä»˜é›†æˆå‡†å¤‡

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Go 1.24.3+
- Node.js 18+
- PostgreSQL 12+
- Bun (æ¨è) æˆ– npm/yarn

### 1. å…‹éš†é¡¹ç›®

```bash
git clone <repository-url>
cd my-app
```

### 2. å¯åŠ¨åç«¯æœåŠ¡

```bash
cd backend
go mod download
# é…ç½®æ•°æ®åº“è¿æ¥ (configs/config.json)
go run cmd/server/main.go
```

### 3. å¯åŠ¨å‰ç«¯åº”ç”¨

```bash
cd frontend
bun install
bun dev
```

### 4. å¯åŠ¨å……ç”µæ¡©æ¨¡æ‹Ÿå™¨

```bash
cd simulator
go mod download
go run cmd/main.go
```

### 5. è®¿é—®åº”ç”¨

- å‰ç«¯åº”ç”¨: <http://localhost:5173>
- åç«¯ API: <http://localhost:8080>

## é¡¹ç›®ç»“æ„

```
my-app/
â”œâ”€â”€ backend/                 # åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ cmd/server/         # ä¸»ç¨‹åºå…¥å£
â”‚   â”œâ”€â”€ configs/            # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ internal/           # å†…éƒ¨ä»£ç 
â”‚   â”‚   â”œâ”€â”€ api/           # APIè·¯ç”±å’Œå¤„ç†å™¨
â”‚   â”‚   â”œâ”€â”€ config/        # é…ç½®ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ database/      # æ•°æ®åº“è¿æ¥
â”‚   â”‚   â”œâ”€â”€ middleware/    # ä¸­é—´ä»¶
â”‚   â”‚   â”œâ”€â”€ model/         # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ repository/    # æ•°æ®è®¿é—®å±‚
â”‚   â”‚   â””â”€â”€ service/       # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”œâ”€â”€ migrations/        # æ•°æ®åº“è¿ç§»
â”‚   â””â”€â”€ README.md
â”œâ”€â”€ frontend/               # å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ lib/           # å…±äº«åº“
â”‚   â”‚   â”œâ”€â”€ routes/        # é¡µé¢è·¯ç”±
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ static/            # é™æ€æ–‡ä»¶
â”‚   â””â”€â”€ README.md
â”œâ”€â”€ simulator/              # å……ç”µæ¡©æ¨¡æ‹Ÿå™¨
â”‚   â”œâ”€â”€ cmd/               # ä¸»ç¨‹åºå…¥å£
â”‚   â”œâ”€â”€ configs/           # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ internal/          # å†…éƒ¨ä»£ç 
â”‚   â”‚   â”œâ”€â”€ config/        # é…ç½®ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ models/        # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ services/      # æœåŠ¡å±‚
â”‚   â”‚   â”œâ”€â”€ simulator/     # æ¨¡æ‹Ÿå™¨æ ¸å¿ƒ
â”‚   â”‚   â””â”€â”€ utils/         # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ README.md
â””â”€â”€ README.md              # é¡¹ç›®æ€»è§ˆ
```

## æ•°æ®åº“è®¾è®¡

### æ ¸å¿ƒæ•°æ®è¡¨

- `users` - ç”¨æˆ·ä¿¡æ¯
- `charging_piles` - å……ç”µæ¡©ä¿¡æ¯
- `charging_requests` - å……ç”µè¯·æ±‚
- `charging_sessions` - å……ç”µä¼šè¯
- `queue_status` - æ’é˜ŸçŠ¶æ€
- `billing_details` - è®¡è´¹è¯¦å•
- `fault_records` - æ•…éšœè®°å½•
- `system_config` - ç³»ç»Ÿé…ç½®

### å…³ç³»å›¾

```
Users â”€â”€â”
        â”œâ”€â”€ ChargingRequests â”€â”€ ChargingSessions â”€â”€ BillingDetails
        â””â”€â”€ QueueStatus
                â”‚
ChargingPiles â”€â”€â”´â”€â”€ FaultRecords
```

## API æ¥å£æ–‡æ¡£

### è®¤è¯æœåŠ¡

- `POST /api/v1/auth/register` - ç”¨æˆ·æ³¨å†Œ
- `POST /api/v1/auth/login` - ç”¨æˆ·ç™»å½•
- `GET /api/v1/auth/profile` - è·å–ç”¨æˆ·ä¿¡æ¯

### å……ç”µæ¡©ç®¡ç†

- `GET /api/v1/charging-piles` - è·å–å……ç”µæ¡©åˆ—è¡¨
- `PUT /api/v1/charging-piles/{id}/control` - æ§åˆ¶å……ç”µæ¡©
- `GET /api/v1/charging-piles/queue` - è·å–æ’é˜Ÿä¿¡æ¯

### å……ç”µæœåŠ¡

- `POST /api/v1/charging/request` - æäº¤å……ç”µè¯·æ±‚
- `GET /api/v1/charging/queue-status` - æŸ¥è¯¢æ’é˜ŸçŠ¶æ€
- `POST /api/v1/charging/cancel` - å–æ¶ˆå……ç”µè¯·æ±‚

### æ¨¡æ‹Ÿå™¨æ¥å£

- `POST /api/v1/simulator/assign-charging` - åˆ†é…å……ç”µä»»åŠ¡
- `POST /api/v1/simulator/charging-progress` - ä¸ŠæŠ¥å……ç”µè¿›åº¦
- `POST /api/v1/simulator/charging-complete` - ä¸ŠæŠ¥å……ç”µå®Œæˆ

## é…ç½®è¯´æ˜

### åç«¯é…ç½® (backend/configs/config.json)

```json
{
  "server": {
    "port": "8080",
    "host": "0.0.0.0"
  },
  "database": {
    "host": "localhost",
    "port": "5432",
    "user": "postgres",
    "password": "password",
    "dbname": "charging_system"
  },
  "charging": {
    "fastChargingPileNum": 2,
    "trickleChargingPileNum": 3,
    "fastChargingPower": 7.0,
    "trickleChargingPower": 3.5
  }
}
```

### æ¨¡æ‹Ÿå™¨é…ç½® (simulator/configs/simulator.json)

```json
{
  "backend": {
    "url": "http://localhost:8080"
  },
  "piles": {
    "fastCharging": {
      "count": 2,
      "power": 7.0
    },
    "trickleCharging": {
      "count": 3,
      "power": 3.5
    }
  }
}
```
