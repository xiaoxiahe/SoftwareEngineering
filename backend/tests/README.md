# 测试脚本使用说明

## 环境准备

1. 安装 Python 依赖：

```bash
pip install -r requirements.txt
```

2. 确保后端服务器运行在 `http://localhost:8080`

3. 确保模拟器 `simulator.exe` 在当前目录或指定路径

## 运行测试

```bash
python main.py test_case1.txt
```

## 测试用例格式

测试用例文件格式如下：

```text
6:00:00
(A,V1,T,7) (A,V2,F,30)

6:30:00
(A,V3,T,28) (A,V4,F,120)

7:00:00
(B,T2,O,0)
```

### 命令说明

- **充电请求命令**: `(A,用户名,充电模式,容量)`

  - `A`: 表示充电请求
  - 用户名: 如 `V1`, `V2` 等
  - 充电模式: `T` = 慢充(slow), `F` = 快充(fast)
  - 容量: 请求的充电容量

- **充电桩控制命令**: `(B,充电桩ID,操作类型,操作值)`
  - `B`: 表示充电桩控制
  - 充电桩 ID: 如 `T1`, `T2` 等
  - 操作类型: 通常为 `O`
  - 操作值: `0` = 故障, `1` = 恢复

## 输出说明

脚本会输出以下信息：

- 各步骤执行结果
- 排队状态信息
- 等候区车辆信息
- 错误和异常信息

## 注意事项

1. 所有用户的密码默认为 `3`
2. 脚本会自动处理用户登录和 token 管理
3. 模拟器会在测试开始时自动启动，测试结束时自动停止
4. 所有模拟器命令都会发送到同一个模拟器进程
5. 每个时间点执行完后会获取系统状态
6. 如果某个命令执行失败，会继续执行后续命令

## 模拟器交互方式

脚本会：

1. 启动模拟器进程 (`./simulator.exe`)
2. 通过标准输入向模拟器发送命令
3. 每个时间点发送 `set clock <time>` 命令
4. 根据测试用例发送故障和恢复命令
5. 测试结束后自动停止模拟器进程
